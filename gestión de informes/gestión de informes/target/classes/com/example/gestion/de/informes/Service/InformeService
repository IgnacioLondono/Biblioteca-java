package com.example.gestion.de.informes.service;

import org.springframework.stereotype.Service;
import java.util.List;
import java.util.Optional;
import com.example.gestion.de.informes.model.Informe;
import com.example.gestion.de.informes.repository.InformeRepository;

@Service
public class InformeService {

    private final InformeRepository informeRepository;

    public InformeService(InformeRepository informeRepository) {
        this.informeRepository = informeRepository;
    }

    public List<Informe> obtenerTodos() {
        return informeRepository.findAll();
    }

    public Optional<Informe> obtenerPorId(Long id) {
        return informeRepository.findById(id);
    }

    public Informe crear(Informe informe) {
        return informeRepository.save(informe);
    }

    public Informe actualizar(Long id, Informe datos) {
        return informeRepository.findById(id).map(informe -> {
            informe.setTitulo(datos.getTitulo());
            informe.setDescripcion(datos.getDescripcion());
            return informeRepository.save(informe);
        }).orElseThrow(() -> new RuntimeException("Informe no encontrado"));
    }

    public void eliminar(Long id) {
        informeRepository.deleteById(id);
    }
}

